# TIL 26/01/24 - classList

TIL: 프로젝트 진행 중 리뷰 작성 창의 글자수를 세는 함수를 만들고, 글자수에 따라 색상 강조를 시켜주기 위해 어떻게 해야 하는지 학습


## 글자수 세기 함수 initCharCounter

```jsx
export function initCharCounter(textareaId, countId) {
    const textarea = document.getElementById(textareaId);
    const countDisplay = document.getElementById(countId);
    const MAX_CHARS = 500; // 최대 글자 수 설정

    if (!textarea || !countDisplay) return; // textarea, countDisplay가 없다면 함수 종료(에러방지)

    // 사용자가 input = 키보드를 누를 때마다 함수 실행
    textarea.addEventListener('input', () => {
        let length = textarea.value.length;

        // 혹시나 복사 붙여넣기로 500자가 넘는 경우를 대비해 한 번 더 자름
        if (length > MAX_CHARS) {
            textarea.value = textarea.value.substring(0, MAX_CHARS);
            length = MAX_CHARS;
        }

        updateCount(length, countDisplay);
    });
}

```

`textarea.addEventListener()` 부분이 핵심적인 로직을 담당하는데 input파라미터로 사용자가 키보드를 누를 때마다(input이나 textarea요소의 값이 변경될 때 마다) 함수가 실행됩니다. 

`addEventListener`가 `EventTarget`의 메서드라는것을 공식 문서를 통해 알았습니다.

[MDN Web Docs - addEventListener](https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener)

함수가 실행될 때 `let length` 에 textarea요소 값의 길이를 담아줍니다.

글자 수 제한에 대한 if문을 넣어두었고 이후엔 `updateCount`함수에 전달해줍니다.

처음 기능을 구현했을 때는 updateCount함수 없이 바로 countDisplay에 넣어 함수가 종료되었습니다. 그 결과 아래와 같이 작동했는데요.

![review_before](https://velog.velcdn.com/images/geunchanlee/post/d81038f4-1bf0-4736-a168-86429787c813/image.gif)


사용자가 입력하는 글자수가 최소 입력 글자 수 제한과 상관없이 카운트만 되고 있는 모습입니다.

---

## 글자 수 하이라이트 기능 updateCount

`updateCount` 함수를 넣어 보완했습니다.

```jsx
function updateCount(length, countDisplay) {
    countDisplay.textContent = length;

    if (length < 30) {
        // 30자 미만이면 warning 클래스 추가
        countDisplay.classList.add('warning');
        countDisplay.classList.remove('success');
    } else {
        // 30자 이상이면 success 클래스로 교체
        countDisplay.classList.remove('warning');
        countDisplay.classList.add('success');
    }
}
```

countDisplay에 함수 매개변수로 전달받은 현재 글자수를 넣어 업데이트한 뒤,

if문으로 제한 길이에 따라 글자수를 보여주는 클래스에 warning을 더하거나 success를 더하고 빼는 기능을 만들었습니다.

countDisplay 값에 따라 글자의 색을 어떻게 바꿔야 하는 지 고민을 했는데  `Element.classList` 를 사용하면 클래스 목록에 간단하게 접근하고 추가, 제거가 가능했습니다. 

### className vs classList

className을 사용하면 element의 클래스 이름이 반환됩니다. `element.className + “ warning”` 코드를 통해서 지금 구현과 비슷한 기능을 만들 수 있는데 이렇게 처리하는 방법에 문제가 있습니다.

1. 해당 코드가 불러와질때 마다 `class=”warning warning”`처럼 반복해서 추가되는 문제가 있습니다. 이렇게 하더라도 class.warning에 설정한 스타일이 적용되긴 하지만 태그가 지저분해지는 문제가 있습니다.
2. 잊지 말고 매번 공백을 더해줘야 합니다. 공백이 없다면 기존 클래스와 바로 붙어서 스타일이 깨질 수 있습니다.
3. 더할 때 뿐 아니라 지금 코드에서 30자 아래로 떨어진다면 `remove(”sucess”)` 사용하는 것처럼 클래스를 지워야 하는데 className 방식을 사용한다면 replace로직을 사용해서 sucess문자열을 다 지워줘야 해서 복잡합니다.

`classList`는 읽기 전용으로 작동하고 `add`, `remove`, `item`, `toggle`등의 메서드를 사용해 편리하고 안전하게 사용할 수 있기 때문에 이번 기능 구현에서 사용했습니다.

[MDN Web Docs - classList](https://developer.mozilla.org/ko/docs/Web/API/Element/classList)

```css
review.css파일의 리뷰 입력 창 부분
/* 기본 상태 */
#current-count {
    font-weight: bold;
    transition: color 0.3s ease;
}

/* 30자 미만일 때 적용될 클래스 */
#current-count.warning {
    color: #fa5c5c; 
}

/* 30자 이상일 때 적용될 클래스 */
#current-count.success {
    color: #00ae38;
}
```

해당 코드를 더해서 사용자 입력에 따라 유동적으로 현재글자 표시 색상이 변하게 했습니다.

![review_after](https://velog.velcdn.com/images/geunchanlee/post/9df5973c-b3a7-4404-86fd-dcd033fad6da/image.gif)


classList를 사용해 클래스를 변경시킨 결과 사용자 입력에 따라 동적으로 변하는 모습을 볼 수 있습니다.

---

### 기억하기!

- `addEventListener` 를 사용해 요소가 바뀔 때마다 함수를 실행할 수 있다.

- `classList`를 이용해 클래스 목록에 쉽게 접근할 수 있다.
   
   - className 대신 classList를 쓴 이유 기억하기
    
- 클래스 이름을 바꾸면서 동적 변화를 만들어낼 수 있다.