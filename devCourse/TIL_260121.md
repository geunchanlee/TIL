# TIL 26/01/21 - React 2

[React 1](./TIL_260120.md)

<br/>

## 이벤트 핸들링

*React Developer Tools* 확장프로그램 설치 후 컴포넌트 변하는것 보기 

[React 참고서 - 이벤트에 응답하기](https://ko.react.dev/learn/responding-to-events)

**event** = 사용자가 브라우저에서 DOM요소들과 상호작용하는 것 

주의사항

- 이벤트 이름은 카멜 표기법 사용

- 이벤트에 실행할 자바스크립트 코드 전달이 아니라, 함수 형태의 값 전달

- DOM요소에만 이벤트 설정 가능

함수형 컴포넌트로 이벤트 구현

```jsx
const EventEx = () => {
    const [form, setForm] = useState({
        username: '',
        message: ''
    });
    const { username, message } = form;
    const onChange = e => {
        const nextForm = {
            ...form, // 기존 form 내용을 복사
            [e.target.name]: e.target.value // 값 덮어쓰기
        };
        setForm(nextForm);
    };
    // alert 메세지로 확인하고 초기화
    const onClick = () => {
        alert(username + ': ' + message);
        setForm({
            username: '',
            message: ''
        });
    };
    const onKeyPress = e => {
        if (e.key === 'Enter') {
            onClick();
        }
    };
```

<br/>

## 생명주기
[참고 블로그](https://velog.io/@youngminss/React-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%83%9D%EB%AA%85%EC%A3%BC%EA%B8%B0-%EB%A9%94%EC%84%9C%EB%93%9C)

![React lifecycle](https://github.com/user-attachments/assets/1be8145b-be8d-402b-8d51-96fd20ecd87c)

라이프사이클 메서드

- `Will` → 어떤 작업 작동 전에 실행

- `Did` → 어떤 작업 작동 후에 실행

라이프사이클은 마운트, 업데이트, 언마운트 3가지 분류로 나뉨

**마운트** - DOM이 생성되고 브라우저에 나타나는 시점

마운트시 호출되는 메서드

- **`constructor`** 컴포넌트 생성자 메서드. 초기 state를 정할 수 있다.

- **`getDerivedStateFromProps`** props로 받아온 값 state에 동기화하는 메서드

- **`render`** 준비한 UI 렌더링하는 메서드. 필수

- **`componentDidMount`** 컴포넌트를 만들고, 첫 렌더링 후 실행

**업데이트** - 컴포넌트가 여러 번 렌더링 되는 것

컴포넌트가 업데이트되는 경우: **props**가 바뀔 때, **state**가 바뀔 때, 부모 컴포넌트가 **리렌더링**될 때, **this.forceUpdate**로 강제 렌더링 될 때.

업데이트에 호출되는 메서드

- **`getDerivedStateFromProps`** mount에도 있는데 props 변화에 따라 state 동기화

- **`shouldComponentUpdate`** props나 state 변경했을 때 컴포넌트가 리렌더링 해야 할 지 말지를 지정하는 메서드.

    - true, false를 반환한다

    - 컴포넌트에서 이 메서드를 따로 생성하지 않으면 기본적으로 true 반환

    - false를 리턴하면 업데이트 과정 중지
- **`render`**

- **`getSnapshotBeforeUpdate`** render 결과물이 브라우저에 반영 직전에 호출

- **`componentDidUpdate`** 리렌더링 완료 후 실행됨

**언마운트** - 컴포넌트를 DOM에서 제거하는 것

- **`componentWillUnmount`** 컴포넌트를 DOM에서 제거할 때 실행
    
    - `componentDidMount`에서 등록한 이벤트, 타이머, 직접 생성한 DOM이 있다면 여기서 제거

<br/>

## Hook

리액트의 state, 생명주기 기능에 갈고리를 걸어 원하는 시점에 정해진 함수를 실행되도록 만든 것

다양한 기능을 제공해 기존 함수형 컴포넌트에서 할 수 없던 작업 가능하게 함

훅의 이름은 모두 훅이 수행하는 기능에 따라 `use` 로 시작함.

**훅 규칙**

- 훅은 무조건 최상위 레벨에서만 호출

- 리액트 함수 컴포넌트에서만 훅을 호출해야 함

- 함수 컴포넌트, 직접 만든 커스텀 훅에서만 호출 가능

### useState

[React 참고서 - **useState**](https://ko.react.dev/reference/react/useState)

가장 기본적인 Hook - 함수형 컴포넌트에서 **가변적인 상태**를 지닐 수 있게 함

`useState()`의 매개변수에 초기화할 값을 넣어 초기화할 수 있다.

- `useState` 함수를 호출시 두 개의 값을 가진 배열을 반환함
    - 첫 번째 원소는 `state`: 현재 상태
    - 두 번째 원소는 `setState`: 상태 설정할 수 있는 setter

useState를 여러 번 사용할 수 있다 

```jsx
const Info = () => {
    const [name, setName] = useState('');
    const [nickname, setNickname] = useState('');
    const onChangeName = e => {
        setName(e.target.value);
    }
    const onChangeNickName = e => {
        setNickname(e.target.value);
    }
```

name, nickname에서 두 번 useState를 사용했다.